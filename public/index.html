<!DOCTYPE html>
<html lang='pt-br' data-ng-app="app">
<head>
  <meta charset="utf-8">
  <title>Angular Charts</title>
</head>
<body data-ng-controller="Controller as vm">

  <div data-ng-init="vm.Dados()" id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.src.js"></script>
  <script>
    'use strict'
    angular.module('app', [])
    .controller('Controller', function($http) {

      var vm = this
      
      vm.data = []

      vm.Dados = function() {
        
        // $http({
        //   method: 'GET',
        //   url: 'http://localhost:8888/dados'
        // })
        // .then(function(ret) {
        //   var arr = ret.data
        //   arr.forEach(function(a,b,c) {
        //     vm.data[b] = {name:a.uf, y:parseFloat(a.total)}
        //   })
        // })

          var arr = [{"ano":"2017","uf":"SP","total":"4338236.960000"},{"ano":"2017","uf":"MG","total":"79965.170000"},{"ano":"2017","uf":"RJ","total":"35556.470000"},{"ano":"2017","uf":"PI","total":"34391.540000"},{"ano":"2017","uf":"RS","total":"27799.440000"},{"ano":"2017","uf":"TO","total":"22813.780000"},{"ano":"2017","uf":"PR","total":"22669.910000"},{"ano":"2017","uf":"BA","total":"22010.810000"},{"ano":"2017","uf":"PB","total":"20812.370000"},{"ano":"2017","uf":"MT","total":"18513.230000"},{"ano":"2017","uf":"GO","total":"18171.200000"},{"ano":"2017","uf":"PE","total":"16781.820000"},{"ano":"2017","uf":"SC","total":"13182.810000"},{"ano":"2017","uf":"ES","total":"11026.410000"},{"ano":"2017","uf":"MS","total":"10795.680000"},{"ano":"2017","uf":"MA","total":"10030.800000"},{"ano":"2017","uf":"RN","total":"9841.970000"},{"ano":"2017","uf":"PA","total":"6092.990000"},{"ano":"2017","uf":"CE","total":"5290.910000"},{"ano":"2017","uf":"DF","total":"4690.890000"},{"ano":"2017","uf":"SE","total":"3673.630000"},{"ano":"2017","uf":"AL","total":"3127.600000"},{"ano":"2017","uf":"RO","total":"2800.000000"},{"ano":"2017","uf":"AM","total":"2130.000000"},{"ano":"2017","uf":"AC","total":"1192.140000"},{"ano":"2017","uf":"RR","total":"527.000000"}]


          arr.forEach(function(a,b,c) {
            vm.data[b] = {name:a.uf, y:parseFloat(a.total)}
          })


          Highcharts.chart('container', {
              chart: {
                  plotBackgroundColor: null,
                  plotBorderWidth: null,
                  plotShadow: false,
                  type: 'pie'
              },
              title: {
                  text: 'Vendas do Ano de 2017 por Estado'
              },
              tooltip: {
                  pointFormat: '{series.name}: <b>R$ {point.y:.2f}</b>'
              },
              plotOptions: {
                  pie: {
                      allowPointSelect: true,
                      cursor: 'pointer',
                      dataLabels: {
                          enabled: true,
                          format: '<b>{point.name}</b>: R$ {point.y:.2f}',
                          style: {
                              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                          }
                      }
                  }
              },
              series: [{
                  name: 'Estado',
                  colorByPoint: true,
                  data: vm.data
              }]
          });
      }
    })
  </script>
</body>
</html>